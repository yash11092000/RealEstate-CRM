@* @model PhysioWeb.Models.NewQuotation *@
@{
	ViewBag.Title = "Quotation Management";
	var theme = User.FindFirst("Theme")?.Value ?? "#198754";
}

<style>
	:root {
		--theme-color: @theme;
		--sidebar-width: 280px;
		--sidebar-collapsed-width: 70px;
		--transition-speed: 0.3s;
		--primary-color: @theme;
		--secondary-color: #6c757d;
		--light-bg: #f8f9fa;
	}

	.card-title i {
		color: var(--theme-color);
	}

	.nav-tabs .nav-link.active {
		background: var(--theme-color);
		color: #fff !important;
	}

	.btn-theme {
		background-color: var(--theme-color);
		border-color: var(--theme-color);
		color: white;
	}

		.btn-theme:hover {
			background-color: #166f46;
			border-color: #166f46;
		}

	.nav-tabs .nav-link {
		color: var(--theme-color);
		font-weight: 600;
		border: 2px solid transparent;
		border-radius: 0.5rem 0.5rem 0 0;
		transition: all 0.3s ease-in-out;
	}

		.nav-tabs .nav-link:hover {
			background: #e6f4ea;
			border-color: var(--theme-color);
			color: var(--theme-color);
		}

		.nav-tabs .nav-link.active {
			background: var(--theme-color);
			color: white !important;
			border-color: var(--theme-color);
		}
</style>

<main class="dashboard-content with-sidebar collapsed">
	<div class="container-fluid mt-4">
		<ul class="nav nav-tabs" id="quotationTabs" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active" id="new-quotation-tab" data-bs-toggle="tab"
						data-bs-target="#new-quotation" type="button" role="tab">
					<i class="bi bi-file-earmark-plus"></i> New Quotation
				</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="all-quotations-tab" data-bs-toggle="tab"
						data-bs-target="#all-quotations" type="button" role="tab">
					<i class="bi bi-list-ul"></i> All Quotations
				</button>
			</li>
		</ul>

		<div class="tab-content border border-top-0 p-4" id="quotationTabsContent">
			<!-- New Quotation Tab -->
			<div class="tab-pane fade show active" id="new-quotation" role="tabpanel">
				<form asp-action="CreateQuotation" method="post" id="quotationForm">
					<div class="card p-3 mb-4 shadow-sm">
						<h5 class="card-title"><i class="bi bi-info-circle-fill"></i> Quotation Details</h5>
						<div class="row">
							<div class="col-md-4 mb-3">
								<label class="form-label">Quotation ID</label>
								<input class="form-control" value="QTN001" readonly />
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Lead / Customer ID</label>
								<select class="form-select">
									<option value="">-- Select Lead / Customer --</option>
									<option>LEAD001 - Michael Scott</option>
									<option>LEAD002 - Pam Beesly</option>
								</select>
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Property ID</label>
								<select class="form-select">
									<option value="">-- Select Property --</option>
									<option>PROP001 - Ocean View Apartment</option>
									<option>PROP002 - Downtown Office</option>
								</select>
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Quotation Date</label>
								<input type="date" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Quoted Amount (₹)</label>
								<input type="number" step="0.01" class="form-control" placeholder="Enter amount" />
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Discount / Offer (%)</label>
								<input type="number" step="0.1" class="form-control" placeholder="Optional" />
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Valid Till</label>
								<input type="date" class="form-control" />
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Agent Name</label>
								<select class="form-select">
									<option value="">-- Select Agent --</option>
									<option>Agent 1 - John Smith</option>
									<option>Agent 2 - Sarah Lee</option>
								</select>
							</div>
							<div class="col-md-4 mb-3">
								<label class="form-label">Status</label>
								<select class="form-select">
									<option value="Sent">Sent</option>
									<option value="Accepted">Accepted</option>
									<option value="Rejected">Rejected</option>
								</select>
							</div>
							<div class="col-md-12 mb-3">
								<label class="form-label">Remarks / Notes</label>
								<textarea class="form-control" rows="4" placeholder="Add special terms or conditions..."></textarea>
							</div>
						</div>
					</div>

					<div class="d-flex justify-content-end gap-2">
						<button type="reset" class="btn btn-secondary btn-lg">
							<i class="bi bi-x-circle"></i> Reset
						</button>
						<button type="submit" class="btn btn-theme btn-lg">
							<i class="bi bi-save"></i> Save Quotation
						</button>
					</div>
				</form>
			</div>

			<!-- All Quotations Tab (Static Example) -->
			<div class="tab-pane fade" id="all-quotations" role="tabpanel">
				<table class="table table-striped table-hover mt-3">
					<thead class="table-primary">
						<tr>
							<th>Quotation ID</th>
							<th>Lead ID</th>
							<th>Property</th>
							<th>Quoted Amount</th>
							<th>Agent</th>
							<th>Status</th>
							<th>Date</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>QTN001</td>
							<td>LEAD001</td>
							<td>Ocean View Apartment</td>
							<td>₹75,00,000</td>
							<td>John Smith</td>
							<td><span class="badge bg-warning">Sent</span></td>
							<td>2025-11-05</td>
							<td><button class="btn btn-sm btn-info"><i class="bi bi-eye"></i> View</button></td>
						</tr>
						<tr>
							<td>QTN002</td>
							<td>LEAD002</td>
							<td>Downtown Office</td>
							<td>₹1,20,00,000</td>
							<td>Sarah Lee</td>
							<td><span class="badge bg-success">Accepted</span></td>
							<td>2025-11-07</td>
							<td><button class="btn btn-sm btn-info"><i class="bi bi-eye"></i> View</button></td>
						</tr>
					</tbody>
				</table>
				<div class="d-flex justify-content-between">
					<span class="text-muted">Showing 1 to 2 of 2 total quotations.</span>
					<button class="btn btn-outline-secondary">Load More</button>
				</div>
			</div>
		</div>
	</div>
</main>

@section Scripts {
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var triggerEl = document.querySelector('#quotationTabs button[data-bs-target="#new-quotation"]');
			if (triggerEl) {
				bootstrap.Tab.getInstance(triggerEl)?.show();
			}
		});
	</script>
}
