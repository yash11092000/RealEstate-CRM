@* @model PhysioWeb.Models.Lead *@
@{
    ViewBag.Title = "Lead Profile";
    var theme = User.FindFirst("Theme")?.Value ?? "#198754";
}

<style>
    :root {
        --theme-color: @theme;
        --sidebar-width: 280px;
        --sidebar-collapsed-width: 70px;
        --transition-speed: 0.3s;
        --primary-color: @theme;
        --secondary-color: #6c757d;
        --light-bg: #f8f9fa;
    }

    .lead-profile-header {
        background: linear-gradient(135deg, var(--theme-color), #2e7d32);
        color: white;
        padding: 1.5rem;
        border-radius: 10px;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .status-badge {
        padding: 0.4em 0.8em;
        border-radius: 15px;
        font-weight: 600;
        font-size: 0.8rem;
    }

    .badge-new { background-color: #e3f2fd; color: #1565c0; }
    .badge-contacted { background-color: #e8f5e8; color: #2e7d32; }
    .badge-qualified { background-color: #fff3cd; color: #856404; }
    .badge-converted { background-color: #d1ecf1; color: #0c5460; }
    .badge-lost { background-color: #f8d7da; color: #721c24; }

    .card {
        border: none;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        margin-bottom: 1rem;
    }

    .card-header {
        background: rgba(var(--theme-color), 0.1);
        border-bottom: 2px solid var(--theme-color);
        padding: 0.75rem 1rem;
    }

    .card-title {
        color: var(--theme-color);
        font-weight: 600;
        margin: 0;
        font-size: 1rem;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    .info-item {
        display: flex;
        flex-direction: column;
    }

    .info-label {
        font-size: 0.8rem;
        color: #6c757d;
        font-weight: 500;
        margin-bottom: 0.25rem;
    }

    .info-value {
        font-weight: 500;
        color: #333;
    }

    .timeline {
        position: relative;
        padding-left: 20px;
    }

    .timeline::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: var(--theme-color);
        opacity: 0.3;
    }

    .timeline-item {
        position: relative;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #f0f0f0;
    }

    .timeline-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .timeline-item::before {
        content: '';
        position: absolute;
        left: -16px;
        top: 6px;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--theme-color);
    }

    .activity-content {
        font-size: 0.9rem;
    }

    .activity-time {
        font-size: 0.75rem;
        color: #6c757d;
        margin-top: 0.25rem;
    }

    .quick-action-btn {
        padding: 0.5rem;
        font-size: 0.8rem;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .property-card {
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 0.75rem;
        margin-bottom: 0.75rem;
        background: #f8f9fa;
    }

    .property-card:last-child {
        margin-bottom: 0;
    }

    .interest-badge {
        font-size: 0.7rem;
        padding: 0.25em 0.6em;
    }

    .btn-compact {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }

    .contact-info {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-top: 0.5rem;
    }

    .contact-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
    }
</style>

<main class="dashboard-content with-sidebar collapsed">
    <div class="container-fluid mt-4">
        <!-- Lead Profile Header -->
        <div class="lead-profile-header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <div class="d-flex align-items-center gap-3 mb-2">
                        <h4 class="mb-0">Michael Scott</h4>
                        <span class="status-badge badge-qualified">Qualified</span>
                    </div>
                    <p class="mb-2 opacity-75">LEAD-20241115-001 • Created: Nov 15, 2024</p>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="bi bi-telephone"></i>
                            <span>+91 98765 43210</span>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-envelope"></i>
                            <span>michael@dundermifflin.com</span>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-person"></i>
                            <span>Assigned: John Smith</span>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-source"></i>
                            <span>Source: Website</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <div class="d-flex gap-2 flex-wrap justify-content-end">
                        <button class="btn btn-light btn-compact">
                            <i class="bi bi-telephone"></i> Call
                        </button>
                        <button class="btn btn-light btn-compact">
                            <i class="bi bi-whatsapp"></i> WhatsApp
                        </button>
                        <button class="btn btn-theme btn-compact">
                            <i class="bi bi-person-check"></i> Convert
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Left Column - Main Content -->
            <div class="col-lg-8">
                <!-- Lead Information -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="bi bi-info-circle"></i> Lead Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Full Name</span>
                                <span class="info-value">Michael Scott</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Email</span>
                                <span class="info-value">michael@dundermifflin.com</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Phone</span>
                                <span class="info-value">+91 98765 43210</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Alternate Phone</span>
                                <span class="info-value">+91 91234 56789</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Gender</span>
                                <span class="info-value">Male</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">City</span>
                                <span class="info-value">Mumbai</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Status</span>
                                <span class="info-value"><span class="status-badge badge-qualified">Qualified</span></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Priority</span>
                                <span class="info-value">High</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Preferred Contact</span>
                                <span class="info-value">WhatsApp</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Lead Source</span>
                                <span class="info-value">Website</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Requirement Details -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="bi bi-house-door"></i> Requirement Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Requirement Type</span>
                                <span class="info-value">Buy</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Property Type</span>
                                <span class="info-value">Apartment</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">BHK Preference</span>
                                <span class="info-value">3 BHK</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Furnishing</span>
                                <span class="info-value">Semi-Furnished</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Budget</span>
                                <span class="info-value">₹2.5 Cr</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Preferred Location</span>
                                <span class="info-value">Bandra, Andheri, Juhu</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Timeline</span>
                                <span class="info-value">3-6 Months</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Parking Needed</span>
                                <span class="info-value">2 Vehicles</span>
                            </div>
                        </div>
                        <div class="mt-3 p-3 bg-light rounded">
                            <small class="text-muted"><strong>Additional Requirements:</strong> Looking for a sea-facing apartment with modern amenities. Prefers gated community with security and clubhouse facilities.</small>
                        </div>
                    </div>
                </div>

                <!-- Activity Timeline -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="bi bi-clock-history"></i> Recent Activity</h5>
                    </div>
                    <div class="card-body">
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="activity-content">
                                    <strong>Lead Converted to Customer</strong>
                                    <p class="mb-1">Lead successfully converted to customer CUST-20241115-001</p>
                                    <div class="activity-time">Today, 10:30 AM</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="activity-content">
                                    <strong>Site Visit Scheduled</strong>
                                    <p class="mb-1">Site visit scheduled for Ocean View Apartment</p>
                                    <div class="activity-time">Yesterday, 3:45 PM</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="activity-content">
                                    <strong>Property Shown</strong>
                                    <p class="mb-1">Shown 3 properties in Bandra area</p>
                                    <div class="activity-time">Nov 13, 2024, 11:00 AM</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="activity-content">
                                    <strong>Initial Contact</strong>
                                    <p class="mb-1">Requirements discussed and qualified</p>
                                    <div class="activity-time">Nov 12, 2024, 2:30 PM</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Sidebar -->
            <div class="col-lg-4">
                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="bi bi-lightning"></i> Quick Actions</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-theme quick-action-btn">
                                <i class="bi bi-telephone"></i> Log Call
                            </button>
                            <button class="btn btn-outline-theme quick-action-btn">
                                <i class="bi bi-chat-left-text"></i> Add Note
                            </button>
                            <button class="btn btn-outline-theme quick-action-btn">
                                <i class="bi bi-calendar-plus"></i> Schedule Follow-up
                            </button>
                            <button class="btn btn-outline-theme quick-action-btn">
                                <i class="bi bi-house"></i> Assign Property
                            </button>
                            <button class="btn btn-success quick-action-btn">
                                <i class="bi bi-person-check"></i> Convert to Customer
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Next Follow-up -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="bi bi-calendar-check"></i> Next Follow-up</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <h4 class="text-theme mb-1">Nov 18, 2024</h4>
                            <p class="text-muted mb-1">2:00 PM</p>
                            <small class="text-muted">Site Visit - Ocean View Apartment</small>
                        </div>
                        <div class="d-grid gap-2">
                            <button class="btn btn-theme btn-sm">Mark Completed</button>
                            <button class="btn btn-outline-theme btn-sm">Reschedule</button>
                        </div>
                    </div>
                </div>

                <!-- Assigned Properties -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="bi bi-house-heart"></i> Assigned Properties</h5>
                    </div>
                    <div class="card-body">
                        <div class="property-card">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="mb-0">Ocean View Apartment</h6>
                                <span class="badge bg-success interest-badge">Interested</span>
                            </div>
                            <p class="small text-muted mb-1">3 BHK • Bandra West</p>
                            <p class="small mb-0"><strong>₹2.8 Cr</strong></p>
                        </div>
                        
                        <div class="property-card">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="mb-0">Skyline Towers</h6>
                                <span class="badge bg-warning interest-badge">Shown</span>
                            </div>
                            <p class="small text-muted mb-1">3 BHK • Andheri East</p>
                            <p class="small mb-0"><strong>₹2.3 Cr</strong></p>
                        </div>
                        
                        <div class="property-card">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="mb-0">Green Valley Villa</h6>
                                <span class="badge bg-secondary interest-badge">Suggested</span>
                            </div>
                            <p class="small text-muted mb-1">4 BHK • Juhu</p>
                            <p class="small mb-0"><strong>₹3.2 Cr</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Convert to Customer functionality
            document.querySelector('.btn-success').addEventListener('click', function() {
                if (confirm('Are you sure you want to convert this lead to customer?')) {
                    // Add conversion logic here
                    alert('Lead converted to customer successfully!');
                }
            });

            // Quick action buttons
            document.querySelectorAll('.quick-action-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.textContent.trim();
                    console.log(`Action: ${action}`);
                    // Add specific action handlers here
                });
            });

            // Contact action buttons
            document.querySelectorAll('.btn-light').forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.textContent.trim();
                    console.log(`Contact action: ${action}`);
                    // Add contact action handlers here
                });
            });
        });
    </script>
}